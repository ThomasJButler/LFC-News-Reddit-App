# Implementation Plan

*Generated by comprehensive analysis of `specs/*` against `src/*` - Last updated: January 2026*

**Last verified: January 21, 2026** - Full codebase audit completed via parallel agent analysis

---

## Executive Summary

This plan tracks all remaining work to achieve 9+/10 polish quality across the LFC News Reddit App. Items are prioritized by criticality and grouped by feature area. Each item includes specific file paths, acceptance criteria references, and implementation notes.

**Current codebase analysis (VERIFIED):**
- Components: 19 React components across `/src/components/` (Toast added)
- Test coverage: ~45% (App.test.js + Toast.test.js + utility tests + Redux tests with 315 total tests)
- Animation support: 9 keyframes across 6 files, `prefers-reduced-motion` in 4 files
- Empty states: Comprehensive in PostList (3 variants), basic in CommentList
- Redux: Traditional action/reducer pattern with 4 async thunks, 28 action types
- Utils: 5 utility files (api, cache, formatTime, markdown, sanitize) - all tested
- CI/CD: NO GitHub Actions workflows exist
- Hooks: `/src/hooks/` directory created with useToast.js
- Jest: Fixed transformIgnorePatterns for ESM modules, added test:coverage and test:ci scripts

---

## Status Overview

| Category | Status | Progress | Blocking |
|----------|--------|----------|----------|
| Toast Notifications | COMPLETE | 100% | No |
| Visual Testing (Playwright) | Not Started | 0% | Yes - Regression prevention |
| Test Coverage | Good | ~45% (target 80%) | Yes - Production quality |
| Comment Threading Polish | Partial | ~50% | No |
| Post Card Polish | Partial | ~65% | No |
| Loading States / Skeletons | Partial | ~55% | No |
| Animation Refinements | Partial | ~35% | No |
| Empty States | Mostly Complete | ~85% | No |
| Production Readiness | Not Ready | ~35% | Yes - Deployment blocker |

---

## P0 - Critical (Must Complete Before Production)

### 1. Toast Notification System - COMPLETE
**Spec:** `specs/toast-notifications.md` | **Status:** COMPLETE (100%) | **Completed:** January 2026

The toast notification system has been fully implemented with all core functionality and accessibility features.

#### Component Architecture - COMPLETE

- [x] Create `/src/hooks/` directory
- [x] Create `/src/components/Toast/Toast.js` - Base toast component
  - Props: `type`, `message`, `secondary`, `duration`, `onDismiss`, `action`
  - Icon mapping: CheckCircle (success), AlertCircle (error), Info (info), AlertTriangle (warning)
- [x] Create `/src/components/Toast/Toast.module.css` - Toast styling
  - 4 type variants with left border accent
  - Progress bar animation synced to duration
  - Swipe gesture support with transform
- [x] Create `/src/components/Toast/ToastContainer.js` - Stack management
  - Positioning: bottom (mobile), top-right (desktop)
  - Max 3 visible with queue overflow
  - Stack transition animations (200ms translateY)
- [x] Create `/src/components/Toast/ToastProvider.js` - Context provider
  - State: toasts array, queue array
  - Actions: showToast, dismissToast, dismissAll
  - Auto-dismiss timer management
- [x] Create `/src/components/Toast/index.js` - Exports
- [x] Create `/src/hooks/useToast.js` - Consumer hook
  - Returns `{ showToast, dismissToast, dismissAll }`

#### Integration - COMPLETE

- [x] Add toast portal rendering to `/src/index.js`
- [x] Wrap App with ToastProvider

#### Behavior Implementation - COMPLETE

- [x] Implement auto-dismiss with progress bar (4s default, 6s errors)
- [x] Implement mobile swipe-to-dismiss gesture (horizontal threshold: 100px)
- [x] Implement hover-pause timer behavior (desktop only)
- [x] Add positioning logic responsive to viewport
  - Mobile: `bottom: calc(70px + var(--spacing-md))` (above BottomNav)
  - Desktop: `top: var(--spacing-md); right: var(--spacing-md)`
- [x] Add slide-in animation: 250ms ease-out from right (desktop) or bottom (mobile)
- [x] Add slide-out animation: 200ms ease-in

#### Accessibility - COMPLETE

- [x] Add `role="alert"` for error/warning toasts
- [x] Add `role="status"` for success/info toasts
- [x] Add `aria-live="polite"` for non-urgent
- [x] Add `aria-live="assertive"` for errors
- [x] Pause timer on keyboard focus
- [x] Ensure focus is not stolen from current element

#### Testing - COMPLETE

- [x] Create `/src/components/Toast/__tests__/Toast.test.js` - 14 passing tests

**Files created:**
```
/src/hooks/useToast.js
/src/components/Toast/Toast.js
/src/components/Toast/Toast.module.css
/src/components/Toast/ToastContainer.js
/src/components/Toast/ToastProvider.js
/src/components/Toast/index.js
/src/components/Toast/__tests__/Toast.test.js
```

**Files modified:**
```
/src/index.js (wrapped App with ToastProvider)
```

---

### 2. Visual Testing Infrastructure
**Spec:** `specs/visual-testing.md` | **Status:** Not Started (0%) | **Estimate:** 3-4 hours

Prevents visual regressions across 4 themes and 3 viewports.

#### Dependencies & Configuration

- [ ] Install Playwright: `npm install -D @playwright/test`
- [ ] Run `npx playwright install chromium`
- [ ] Create `/playwright.config.js` with 3 viewport projects:
  - Mobile: 375x812 (iPhone 12)
  - Tablet: 768x1024 (iPad)
  - Desktop: 1440x900 (Standard)
- [ ] Configure snapshot settings:
  - `maxDiffPixels: 100`
  - `threshold: 0.1`
  - `snapshotDir: './__screenshots__'`

#### Directory Structure

- [ ] Create `/e2e/visual/` directory
- [ ] Create `/e2e/helpers/` directory

#### Test Files

- [ ] Create `/e2e/helpers/theme.js` with helpers
- [ ] Create `/e2e/visual/home.spec.js` (4 states x 3 viewports x 4 themes)
- [ ] Create `/e2e/visual/post-detail.spec.js` (5 states)
- [ ] Create `/e2e/visual/comments.spec.js` (3 states)
- [ ] Create `/e2e/visual/components.spec.js` (5 components)

#### CI Integration

- [ ] Create `/.github/workflows/visual-tests.yml`
- [ ] Add npm scripts: `test:e2e`, `test:e2e:update`, `test:e2e:ui`

**Files to create:**
```
/playwright.config.js
/e2e/helpers/theme.js
/e2e/visual/home.spec.js
/e2e/visual/post-detail.spec.js
/e2e/visual/comments.spec.js
/e2e/visual/components.spec.js
/.github/workflows/visual-tests.yml
```

---

### 3. Test Coverage Expansion
**Spec:** `specs/production-readiness.md` | **Status:** ~20% -> Target 80% | **Estimate:** 8-12 hours

**Current state (UPDATED):**
- `App.test.js` exists with 3 smoke tests
- `Toast/__tests__/Toast.test.js` exists with 14 tests (NEWLY ADDED)
- No utility tests exist
- No redux tests exist
- `jest.e2e.config.js` referenced in package.json but FILE DOES NOT EXIST
- Testing dependencies installed: @testing-library/react, @testing-library/jest-dom, @testing-library/user-event, jest
- Jest transformIgnorePatterns fixed to handle react-markdown ESM modules
- Mocks added for react-markdown and react-syntax-highlighter in setupTests.js

#### Configuration

- [ ] Add Jest coverage thresholds to `package.json`
- [x] Add `test:coverage` script
- [x] Add `test:ci` script
- [x] Fixed Jest transformIgnorePatterns to handle react-markdown ESM modules
- [x] Added mocks for react-markdown and react-syntax-highlighter in setupTests.js

#### Test Coverage Expansion

- [x] Created `/src/utils/__tests__/` directory
- [x] All 5 utility files have comprehensive test coverage

#### Utility Tests (Target: 100%)

| File | Status | Coverage |
|------|--------|----------|
| `/src/utils/__tests__/formatTime.test.js` | [x] COMPLETE | 100% coverage |
| `/src/utils/__tests__/cache.test.js` | [x] COMPLETE | 96.42% coverage |
| `/src/utils/__tests__/sanitize.test.js` | [x] COMPLETE | 100% coverage |
| `/src/utils/__tests__/api.test.js` | [x] COMPLETE | 84.37% coverage |
| `/src/utils/__tests__/markdown.test.js` | [x] COMPLETE | 92.3% coverage (known bug: image stripping - link regex runs before image regex, leaving `!` prefix on alt text) |

#### Redux Tests (Target: 90%) - COMPLETE

| File | Status | Coverage |
|------|--------|----------|
| `/src/redux/__tests__/posts.actions.test.js` | [x] COMPLETE | 100% coverage |
| `/src/redux/__tests__/posts.reducer.test.js` | [x] COMPLETE | 100% coverage |
| `/src/redux/__tests__/comments.test.js` | [x] COMPLETE | 100% coverage |
| `/src/redux/__tests__/subreddits.test.js` | [x] COMPLETE | 100% coverage |

**Note:** `redux-mock-store` was installed as a dev dependency to enable testing of async thunks.

#### Component Tests (Target: 80%)

| Component | Status | Priority |
|-----------|--------|----------|
| PostItem | [ ] Not Started | High |
| PostDetail | [ ] Not Started | High |
| CommentList | [ ] Not Started | High |
| SearchBar | [ ] Not Started | Medium |
| ThemeSwitcher | [ ] Not Started | Medium |
| SkeletonLoader | [ ] Not Started | Medium |
| ErrorBoundary | [ ] Not Started | Medium |
| Toast | [x] COMPLETE | High - 14 tests passing |

#### E2E Tests

- [ ] Create `/e2e/happy-path.spec.js`
- [ ] Create `/e2e/theme-persistence.spec.js`
- [ ] Create `/e2e/mobile-navigation.spec.js`
- [ ] Create `/e2e/error-recovery.spec.js`

---

## P1 - High Priority (Core UX Features)

### 4. Comment Threading Visual Polish
**Spec:** `specs/comment-threading-polish.md` | **Status:** ~50% | **Estimate:** 4-5 hours

#### What's Already Done

- [x] Thread lines with depth-based coloring (LFC colors: red, yellow, green, accent, muted)
- [x] Thread lines are 3px thickness with rounded corners
- [x] Collapse/expand functionality working
- [x] Recursive nesting with indentation (capped at 40px mobile, 100px desktop)
- [x] OP badge implemented (pill style, `.opBadge` class)
- [x] Distinguished indicator for mods (`.distinguished` class)
- [x] Alternating background tints for depth clarity (`.commentOddDepth`)
- [x] Reply count displayed on collapse button
- [x] Virtualization support for large threads (threshold at 999, effectively disabled)
- [x] "No comments yet" empty state exists

#### Avatar Placeholders (NOT IMPLEMENTED)

- [ ] Create `/src/components/Avatar/Avatar.js`
  - Circular component showing first letter of username
  - Props: `username`, `size` (default: 32px)
  - Generate consistent background color from username hash
- [ ] Create `/src/components/Avatar/Avatar.module.css`
- [ ] Create `/src/utils/colorHash.js`
- [ ] Integrate Avatar into CommentList header layout

#### User Badges Enhancement

- [x] OP badge exists (theme accent color) - DONE
- [ ] Add explicit Mod badge (green pill) for `distinguished="moderator"` comments
  - Note: `.distinguished` class exists but renders text "moderator" instead of "MOD" badge

#### Thread Line Improvements

- [x] Thread lines 3px with depth colors - DONE
- [ ] Make thread lines clickable to collapse entire branch
- [ ] Add hover glow effect on thread lines (`box-shadow`)
- [ ] Implement max 6 nesting levels before flattening display

#### Action Bar Redesign

- [ ] Add Reply button (pill style, links to Reddit)
- [ ] Add Share button (pill style, copy permalink)
- [ ] Add chevron rotation animation on collapse (0 -> 90 degrees)
- [ ] Show actions on hover (desktop), always visible (mobile)

#### Collapse Animation Enhancement

- [x] Collapse button exists with icon toggle - DONE
- [ ] Add 300ms ease-out height transition for content
- [ ] Show collapsed summary with reply count: `[Avatar] [Username] - [Score] - [N] replies`

**Files to modify:**
```
/src/components/CommentList/CommentList.js
/src/components/CommentList/CommentList.module.css
```

**Files to create:**
```
/src/components/Avatar/Avatar.js
/src/components/Avatar/Avatar.module.css
/src/utils/colorHash.js
```

---

### 5. Skeleton Loader Expansion
**Spec:** `specs/loading-states.md` | **Status:** ~55% | **Estimate:** 2-3 hours

#### What's Already Done

- [x] `PostListSkeleton` - DONE (renders 5 skeleton cards with vote section, content, footer)
- [x] `CommentsSkeleton` - DONE (renders 4 comments with nested replies, avatar placeholders)
- [x] Shimmer animation (opacity-based, 1.5s infinite) - DONE
- [x] Comment avatar skeleton placeholder - DONE (32px desktop, 28px mobile)
- [x] Responsive skeleton layouts for mobile/tablet/desktop - DONE
- [x] ARIA attributes for accessibility (`role="status"`, `aria-live="polite"`) - DONE

#### New Skeleton Components

- [ ] Add `HeaderSkeleton` export
- [ ] Add `SubredditFilterSkeleton` export
- [ ] Add `PostDetailSkeleton` export
- [ ] Add `SearchResultsSkeleton` export

#### Shimmer Animation Upgrade

- [x] Current: opacity-based shimmer (0.6 -> 1 -> 0.6) - DONE
- [ ] Upgrade to gradient-based shimmer per spec:
  ```css
  background: linear-gradient(90deg,
    var(--skeleton-base) 25%,
    var(--skeleton-highlight) 50%,
    var(--skeleton-base) 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  ```

#### Reduced Motion Support

- [ ] Add `@media (prefers-reduced-motion: reduce)` to SkeletonLoader.module.css
  - Currently missing - only in App.css (global), SearchBar, CodeBlock, PostList

**Files to modify:**
```
/src/components/SkeletonLoader/SkeletonLoader.js
/src/components/SkeletonLoader/SkeletonLoader.module.css
```

---

### 6. Staggered List Animations
**Spec:** `specs/animation-refinements.md` | **Status:** Not Started (0%) | **Estimate:** 2-3 hours

**Analysis:** PostList and CommentList render items without stagger animations.

#### Post List Animation

- [ ] Add staggered entry animation in `/src/components/PostList/PostList.js`
- [ ] Animation: fade in + slide up (20px), 300ms duration
- [ ] Stagger delay: 50ms between items (max 10 items)
- [ ] Trigger on initial load only (not on filter/scroll)

#### Comment List Animation

- [ ] Add staggered entry in `/src/components/CommentList/CommentList.js`
- [ ] Animation: fade only, 200ms duration
- [ ] Stagger delay: 30ms between items
- [ ] Nested replies animate after parent

#### Filter Pills Animation

- [ ] Subreddit filter pills stagger on mount (25ms)

**Files to modify:**
```
/src/components/PostList/PostList.js
/src/components/PostList/PostList.module.css
/src/components/CommentList/CommentList.js
/src/components/CommentList/CommentList.module.css
/src/components/SubredditFilter/SubredditFilter.module.css
```

---

## P2 - Medium Priority (Visual Polish)

### 7. Post Card Visual Polish
**Spec:** `specs/post-card-polish.md` | **Status:** ~65% | **Estimate:** 2-3 hours

#### What's Already Done

- [x] Gradient stripe exists (::before pseudo-element, var(--bg-gradient))
- [x] Stripe shows on hover with opacity transition - DONE
- [x] Hover transform: translateY(-2px) - DONE
- [x] Border color shift on hover (`var(--accent-light)`) - DONE
- [x] Shadow elevation on hover (`var(--shadow-theme)`) - DONE
- [x] Lazy loading with `loading="lazy"` - DONE
- [x] Metadata format `r/subreddit - author - time` with bullet separators - DONE
- [x] Stickied badge (green, `.stickied`) - DONE
- [x] Spoiler badge (warning color, `.spoiler`) - DONE
- [x] Flair badges with theme-aware colors (4 variants) - DONE
- [x] 16:9 aspect ratio on thumbnails (`aspect-ratio: 16 / 9`) - DONE
- [x] Rounded corners on thumbnails (`var(--radius-sm)`) - DONE
- [x] Focus visible outline for accessibility (2px solid) - DONE
- [x] Media type icons (Video, Images, Image, ExternalLink) inline with title - DONE
- [x] Score color ranges (scoreLow, scoreDefault, scorePopular, scoreHot) - DONE
- [x] Mobile-first responsive layout (column-reverse on mobile) - DONE

#### Gradient Accent Stripe Positioning

- [x] Current: TOP edge (height: 3px, top/left/right: 0) - EXISTS
- [ ] Spec preference: LEFT edge (width: 4px, top/bottom/left: 0)
  - **Decision needed:** Current top-edge implementation is valid, spec shows left-edge

#### Minor Adjustments

- [ ] Update focus outline from 2px to 3px per spec
- [ ] Optional: Change hover from `translateY(-2px)` to `scale(1.005)` per spec preference
- [ ] Add flair icon prefixes for special flairs (match, transfer)
- [ ] Add gallery count overlay indicator (e.g., "1/5")
- [ ] Add video duration overlay indicator

**Files to modify:**
```
/src/components/PostItem/PostItem.js
/src/components/PostItem/PostItem.module.css
```

---

### 8. Micro-interaction Animations
**Spec:** `specs/animation-refinements.md` | **Status:** ~30% | **Estimate:** 2-3 hours

#### What's Already Done

- [x] Theme color morph (300ms via `--transition-theme`) - DONE
- [x] Button hover effects (translateY, scale) - DONE in multiple components
- [x] Image hover zoom (scale 1.02) - DONE in CommentList
- [x] Transition variables defined in variables.css (--transition-fast: 150ms, --transition-normal: 300ms, --transition-slow: 500ms, --transition-bounce: 400ms)

#### Create Shared Animations File

- [ ] Create `/src/styles/animations.css` with reusable keyframes
- [ ] Import in `/src/index.css`

#### Collapse Button Animation

- [ ] Add chevron rotation (0 -> 90 degrees when collapsed)
- [ ] Duration: 200ms ease-out

#### Button Press Feedback

- [ ] Add scale down to 0.97 on `:active` state
- [ ] Apply globally to interactive buttons

#### Error Shake Animation

- [ ] Add shake animation for error states (translateX oscillation)

**Files to create:**
```
/src/styles/animations.css
```

**Files to modify:**
```
/src/index.css
/src/components/CommentList/CommentList.module.css
```

---

### 9. Modal Animation Enhancement
**Spec:** `specs/animation-refinements.md` | **Status:** ~80% | **Estimate:** 1 hour

#### What's Already Done

- [x] `@keyframes fadeIn` - DONE (in PostDetail.module.css and App.css)
- [x] `@keyframes slideUp` - DONE (20px up, fade in)
- [x] `@keyframes slideUpFromBottom` - DONE (100% up for mobile bottom sheet)
- [x] Overlay fade animation (var(--transition-fast)) - DONE
- [x] Content slide-up animation (var(--transition-normal)) - DONE
- [x] Mobile bottom sheet animation - DONE

#### Remaining Work

- [ ] Add exit animations (reverse of entry)
  - Overlay: fade out (150ms)
  - Content: slide down (200ms ease-in) + fade out
- [ ] Note: May require JS state management for exit animation timing

**Files to modify:**
```
/src/components/PostDetail/PostDetail.module.css
/src/components/PostDetail/PostDetail.js (if JS control needed)
```

---

## P3 - Polish (Final Refinements)

### 10. Empty States
**Spec:** `specs/loading-states.md` | **Status:** ~85% | **Estimate:** 30 min

#### What's Already Done

- [x] PostList "No Reds news here" empty state with search icon - DONE
- [x] PostList search no results with clear search button - DONE
- [x] PostList filter no results with clear filter button - DONE
- [x] Suggestions lists for empty states - DONE
- [x] CommentList "No comments yet" message - DONE (basic, `.noComments`)

#### Remaining Work

- [ ] Enhance CommentList empty state with "Be the first to discuss on Reddit" link
- [ ] Consider extracting reusable `EmptyState` component

**Files to modify:**
```
/src/components/CommentList/CommentList.js
/src/components/CommentList/CommentList.module.css
```

---

### 11. Reduced Motion Support (Global Audit)
**Spec:** `specs/animation-refinements.md`, `specs/loading-states.md` | **Estimate:** 1 hour

#### What's Already Done

- [x] Global reduced motion in `/src/App.css` (lines 245-257) - DONE
- [x] SearchBar spinner - DONE
- [x] CodeBlock transitions - DONE
- [x] PostList pull-to-refresh - DONE

#### Missing Coverage

- [ ] Add to `/src/components/SkeletonLoader/SkeletonLoader.module.css`
- [ ] Verify ErrorBoundary (has comment about respecting, but no actual query)
- [ ] Verify PostDetail modal animations honor global rule

---

### 12. Production Readiness Audits
**Spec:** `specs/production-readiness.md` | **Estimate:** 2-3 hours

#### Lighthouse Audits

- [ ] Run Lighthouse, target Performance 90+
- [ ] Run Lighthouse, target Accessibility 95+
- [ ] Run Lighthouse, target Best Practices 90+
- [ ] Run Lighthouse, target SEO 80+

#### Core Web Vitals

- [ ] Verify LCP < 2.5s
- [ ] Verify FID < 100ms
- [ ] Verify CLS < 0.1

#### Build Verification

- [ ] Verify `npm run build` completes without errors
- [ ] Add `analyze` script with source-map-explorer
- [ ] Install: `npm install -D source-map-explorer`

---

## Implementation Order Recommendation

### Phase 1 (Week 1) - Foundation
1. ~~**Toast Notification System** (P0) - Enables user feedback~~ COMPLETE
2. **Skeleton Loader Expansion** (P1) - Improves loading UX

### Phase 2 (Week 2) - Core Polish
3. **Comment Threading Polish** (P1) - Avatars, action bar, animations
4. **Post Card Visual Polish** (P2) - Minor adjustments
5. **Staggered List Animations** (P1)

### Phase 3 (Week 3) - Testing
6. **Unit Tests for Utilities** (P0)
7. **Redux Tests** (P0)
8. **Component Tests** (P0)

### Phase 4 (Week 4) - Quality Assurance
9. **Visual Testing Infrastructure** (P0)
10. **E2E Tests** (P0)
11. **Production Readiness Audits** (P3)

---

## Files Summary

### New Files to Create (Total: 35+)

**Components:**
```
/src/components/Toast/Toast.js - CREATED
/src/components/Toast/Toast.module.css - CREATED
/src/components/Toast/ToastContainer.js - CREATED
/src/components/Toast/ToastProvider.js - CREATED
/src/components/Toast/index.js - CREATED
/src/components/Toast/__tests__/Toast.test.js - CREATED
/src/components/Avatar/Avatar.js
/src/components/Avatar/Avatar.module.css
```

**Hooks:**
```
/src/hooks/useToast.js - CREATED
```

**Utilities:**
```
/src/utils/colorHash.js
```

**Styles:**
```
/src/styles/animations.css
```

**Test Infrastructure:**
```
/playwright.config.js
/e2e/helpers/theme.js
/e2e/visual/home.spec.js
/e2e/visual/post-detail.spec.js
/e2e/visual/comments.spec.js
/e2e/visual/components.spec.js
/.github/workflows/visual-tests.yml
```

**Unit Tests:**
```
/src/utils/__tests__/api.test.js
/src/utils/__tests__/cache.test.js
/src/utils/__tests__/formatTime.test.js
/src/utils/__tests__/markdown.test.js
/src/utils/__tests__/sanitize.test.js
/src/redux/__tests__/posts.actions.test.js
/src/redux/__tests__/posts.reducer.test.js
/src/redux/__tests__/comments.test.js
/src/redux/__tests__/subreddits.test.js
```

**Component Tests:**
```
/src/components/PostItem/__tests__/PostItem.test.js
/src/components/PostDetail/__tests__/PostDetail.test.js
/src/components/CommentList/__tests__/CommentList.test.js
/src/components/SearchBar/__tests__/SearchBar.test.js
/src/components/ThemeSwitcher/__tests__/ThemeSwitcher.test.js
/src/components/Toast/__tests__/Toast.test.js
/src/components/SkeletonLoader/__tests__/SkeletonLoader.test.js
/src/components/ErrorBoundary/__tests__/ErrorBoundary.test.js
```

**E2E Tests:**
```
/e2e/happy-path.spec.js
/e2e/theme-persistence.spec.js
/e2e/mobile-navigation.spec.js
/e2e/error-recovery.spec.js
```

### Files to Modify

```
/src/index.js (Toast portal, provider)
/src/index.css (import animations.css)
/src/components/SkeletonLoader/SkeletonLoader.js
/src/components/SkeletonLoader/SkeletonLoader.module.css
/src/components/CommentList/CommentList.js
/src/components/CommentList/CommentList.module.css
/src/components/PostList/PostList.js
/src/components/PostList/PostList.module.css
/src/components/PostItem/PostItem.js
/src/components/PostItem/PostItem.module.css
/src/components/PostDetail/PostDetail.js
/src/components/PostDetail/PostDetail.module.css
/src/components/SubredditFilter/SubredditFilter.module.css
/package.json (scripts, dependencies, jest config)
```

---

## Quality Targets

| Metric | Current | Target | Priority |
|--------|---------|--------|----------|
| Test Coverage (Statements) | ~45% | 80% | P0 |
| Test Coverage (Branches) | ~25% | 75% | P0 |
| Lighthouse Performance | Unknown | 90+ | P3 |
| Lighthouse Accessibility | Unknown | 95+ | P3 |
| Lighthouse Best Practices | Unknown | 90+ | P3 |
| Lighthouse SEO | Unknown | 80+ | P3 |
| LCP | Unknown | <2.5s | P3 |
| FID | Unknown | <100ms | P3 |
| CLS | Unknown | <0.1 | P3 |
| Visual Regression Tests | 0 | 48 (4 themes x 3 viewports x 4 pages) | P0 |

---

## Component Implementation Status

| Component | File | Status | Notes |
|-----------|------|--------|-------|
| Toast | `/src/components/Toast/` | 100% | COMPLETE - 14 tests passing |
| Avatar | `/src/components/Avatar/` | 0% | Not started |
| PostItem | `/src/components/PostItem/` | 65% | Minor polish remaining |
| PostDetail | `/src/components/PostDetail/` | 80% | Exit animations missing |
| PostList | `/src/components/PostList/` | 85% | Stagger animations missing |
| CommentList | `/src/components/CommentList/` | 50% | Avatar, action bar, animations |
| SkeletonLoader | `/src/components/SkeletonLoader/` | 55% | 4 skeleton types missing |
| ErrorBoundary | `/src/components/ErrorBoundary/` | 90% | Complete |
| SearchBar | `/src/components/SearchBar/` | 95% | Complete |
| ThemeSwitcher | `/src/components/ThemeSwitcher/` | 95% | Complete |
| Header | `/src/components/Header/` | 95% | Complete |
| SubredditFilter | `/src/components/SubredditFilter/` | 90% | Stagger animation missing |
| BottomNav | `/src/components/BottomNav/` | 95% | Complete |
| Icon | `/src/components/Icon/` | 100% | Complete |
| SpicyMeter | `/src/components/SpicyMeter/` | 100% | Complete |
| VideoPlayer | `/src/components/VideoPlayer/` | 100% | Complete |
| CodeBlock | `/src/components/CodeBlock/` | 100% | Complete |
| LoadingSpinner | `/src/components/LoadingSpinner/` | 100% | Complete |
| ErrorMessage | `/src/components/ErrorMessage/` | 100% | Complete |

---

## Animation Inventory (VERIFIED)

| Animation | File | Type | Reduced Motion | Notes |
|-----------|------|------|----------------|-------|
| fadeIn | App.css:228, PostDetail.module.css:586 | Keyframes | Yes (global) | DUPLICATE - consolidate |
| slideUp | PostDetail.module.css:595 | Keyframes | Yes (global) | 20px translateY |
| slideUpFromBottom | PostDetail.module.css:607 | Keyframes | Yes (global) | 100% for mobile |
| shimmer | SkeletonLoader.module.css:2 | Keyframes | **NO - NEEDS ADD** | Opacity-based, should be gradient |
| errorPulse | ErrorBoundary.module.css:36 | Keyframes | **NO - NEEDS ADD** | Scale bounce 0.8→1.1→1.0 |
| spin | SearchBar.module.css:69 | Keyframes | Yes (local:79) | 360deg rotation |
| sk-bouncedelay | LoadingSpinner.module.css:38 | Keyframes | Yes (global) | Scale bounce |
| pulse | PostList.module.css:301 | Keyframes | Yes (local:311) | Opacity 1→0.6→1 |

**prefers-reduced-motion locations:**
- `/src/App.css:245` - Global catch-all (animation-duration: 0.01ms)
- `/src/components/PostList/PostList.module.css:311` - Pull-to-refresh
- `/src/components/SearchBar/SearchBar.module.css:79` - Spinner
- `/src/components/CodeBlock/CodeBlock.module.css:108` - Transitions

---

## Acceptance Criteria Tracking

### Toast Notifications (from spec) - COMPLETE
- [x] ToastProvider wraps app in index.js
- [x] useToast hook available throughout app
- [x] All 4 toast types render with correct styling
- [x] Auto-dismiss with progress indicator
- [x] Swipe to dismiss on mobile
- [x] Hover pauses timer on desktop
- [x] Proper ARIA attributes for accessibility
- [x] Works correctly in all 4 themes
- [x] Max 3 toasts with proper queuing
- [x] 14 passing unit tests

### Comment Threading (from spec)
- [ ] Avatar placeholders render with username-based colors
- [x] OP badge displays as styled pill
- [ ] Mod badge displays as styled pill
- [ ] Thread lines are clickable for collapse
- [ ] Action bar uses pill-style buttons
- [ ] Collapse animation is smooth (300ms)
- [ ] Collapsed state shows summary with reply count
- [x] Works correctly in all 4 themes
- [x] Mobile touch targets >= 44x44px

### Post Card (from spec)
- [x] Gradient accent stripe visible (top edge)
- [x] Typography hierarchy is clear
- [x] Flair badges appear before title
- [x] Footer uses pill-style display
- [x] Thumbnails have consistent aspect ratio
- [x] Hover state provides subtle feedback
- [x] All content readable at 320px width
- [x] Consistent appearance across all 4 themes
- [x] Focus states for accessibility

### Loading States (from spec)
- [x] PostListSkeleton implemented
- [x] CommentsSkeleton implemented
- [ ] HeaderSkeleton implemented
- [ ] SubredditFilterSkeleton implemented
- [ ] PostDetailSkeleton implemented
- [ ] SearchResultsSkeleton implemented
- [ ] Gradient-based shimmer
- [ ] prefers-reduced-motion in skeleton CSS
- [x] ARIA attributes on skeletons

### Animations (from spec)
- [ ] Post list items stagger on initial load
- [ ] Comment list items stagger appropriately
- [ ] Collapse chevron animates rotation
- [ ] Button press provides tactile feedback
- [x] Modal open transitions are smooth
- [ ] Modal close transitions are smooth
- [ ] Reduced motion fully respected (partial - 4/5 files)

### Visual Testing (from spec)
- [ ] Playwright configured
- [ ] 3 viewport projects
- [ ] 4 theme variants tested
- [ ] CI workflow runs on PR

### Production Readiness (from spec)
- [ ] Test coverage > 80%
- [x] All utility functions have unit tests (api.js, cache.js, formatTime.js, markdown.js, sanitize.js)
- [x] Redux actions/reducers have tests (posts, comments, subreddits)
- [ ] E2E tests cover critical paths
- [ ] Lighthouse performance > 90
- [ ] GitHub Actions CI/CD workflow configured
- [ ] Build verification passes without errors

---

## Codebase Quick Reference

### Redux Structure (Traditional Pattern) - All Tested
- **Store:** `/src/redux/store.js` - redux-thunk middleware
- **Actions:** `/src/redux/actions/` - types.js (28 types), posts.js, comments.js, subreddits.js - All tested (100% coverage)
- **Reducers:** `/src/redux/reducers/` - posts.js (with filters), comments.js, subreddits.js, index.js - All tested (100% coverage)
- **Async Thunks:** fetchPosts, fetchPostDetails, searchPosts, fetchComments - All tested
- **Test Dependency:** `redux-mock-store` installed for async thunk testing

### Utils Summary
| File | Functions | Test Status |
|------|-----------|-------------|
| api.js | 9 exports (fetchPosts, fetchPostDetails, fetchComments, searchPosts, processPostData, processCommentData, tryProxy, fetchFromReddit, isMobile) | TESTED (84.37%) |
| cache.js | 7 operations (get, set, delete, clear, has, size, cleanExpired) | TESTED (96.42%) |
| formatTime.js | 2 functions (formatRelativeTime, formatDateTime) | TESTED (100%) |
| markdown.js | 3 functions (renderMarkdown, decodeHtml, stripMarkdown) | TESTED (92.3%) |
| sanitize.js | 2 functions (sanitizeUrl, sanitizeHtml) | TESTED (100%) |

### Key Directory Structure
```
src/
├── components/     # 19 React components
│   ├── Toast/      # CREATED - Complete with tests
│   ├── Avatar/     # NOT CREATED - P1 need
│   └── ...         # 17 existing components
├── hooks/          # CREATED - useToast.js
├── redux/          # Traditional actions/reducers
├── styles/         # Only variables.css exists
│   └── animations.css  # NOT CREATED
└── utils/          # 5 utility files, all tested
```
